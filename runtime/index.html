<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://openvoiceos.github.io/ovos-technical-manual/runtime/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Runtime Requirements - OVOS Technical Manual</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Runtime Requirements";
        var mkdocs_page_input_path = "runtime.md";
        var mkdocs_page_url = "/ovos-technical-manual/runtime/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> OVOS Technical Manual
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../community/">Community</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../versioning/">Versioning</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../license/">License</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../timeline/">Timeline</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Architecture</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../bus_service/">Bus</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../speech_service/">Listener</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../core/">Core</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../audio_service/">Audio</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gui_service/">GUI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../OCP/">Media</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../config/">Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../backend/">Backend</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Self Hosting</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../stt_server/">STT Server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tts_server/">TTS Server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../persona_server/">Persona Server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../translate_server/">Translate Server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../personal_backend/">Personal Backend</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Plugins</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../OPM/">Plugin Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mic_plugins/">Microphone</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../vad_plugins/">Voice Activity Detection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ww_plugins/">Wake Word</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../stt_plugins/">Speech To Text</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tts_plugins/">Text To Speech</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../g2p_plugins/">Grapheme to Phoneme</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../transformer_plugins/">Transformers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../lang_plugins/">Language Detection/Translation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../solvers/">Question Solvers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../nlp_plugins/">NLP Plugins</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../PHAL/">Platform/Hardware Abstraction Layer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_plugins/">OCP Stream Extractors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../media_plugins/">Media Playback</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Skills</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../guidelines/">Design Guidelines</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skill_structure/">Anatomy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../statements/">Dialog</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../intents/">Intents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../user_res_files/">Customization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skills_bus/">Bus Interaction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skill_filesystem/">Filesystem</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skill_settings/">Skill Settings</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skill_api/">Skill API</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Runtime Requirements</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#ready_settings">ready_settings</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dynamic-loading-and-unloading">Dynamic Loading and Unloading</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#the-runtimerequirements-classproperty">The RuntimeRequirements @classproperty</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#fully-offline-skill">Fully Offline Skill</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#internet-dependent-skill">Internet-Dependent Skill</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#iot-skill-controlling-devices-via-lan">IOT Skill Controlling Devices via LAN</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#gui-and-internet-dependent-skill-with-fallback">GUI and Internet-Dependent Skill with Fallback</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skill_json/">Skill Json</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skill_tests/">Skill Tests</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev/">F.A.Q.</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Continuous Conversation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../prompts/">Prompts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../context/">Follow up Questions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../converse/">Converse</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../layers/">Intent Layers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../session_skills/">Session Aware Skills</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Voice Apps</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../voice_apps/">Standalone Apps</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../qt_apps/">QT Voice Apps</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Fallback</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../fallbacks/">Fallback Skills</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Common Query</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../common_query/">Common Query Skills</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Auto Translation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../universal_skills/">Universal Skills</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Media</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../OCP_skills/">Media Skills</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../OCP_pipeline/">OCP Pipeline</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">GUI</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../homescreen/">Homescreen</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gui_protocol/">Protocol</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../shell/">Shell</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../qt5/">QT5 mycroft-gui</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">MessageBus APIs</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../skill_gui/">GUI Interface</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mk1_api/">Enclosure Api</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Technologies</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../eggscript/">Eggscript</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../bus_client/">Messagebus Client</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mk1_utils/">Mark1 Utils</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../backend_client/">Backend Client</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../jurebes/">Jurebes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../padacioso/">Padacioso</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ovos_bigscreen/">Plasma Bigscreen</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">OVOS Technical Manual</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Skills</li>
      <li class="breadcrumb-item active">Runtime Requirements</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="runtime-requirements">Runtime Requirements</h1>
<h2 id="ready_settings">ready_settings</h2>
<p>The <code>ready_settings</code> configuration is part of the <code>SkillManager</code> and determines when the <code>'mycroft.ready'</code> message is
emitted, indicating that OVOS is ready to operate.</p>
<ul>
<li>
<p><strong>'skills':</strong></p>
<ul>
<li>Waits for the all offline skills to be loaded</li>
</ul>
</li>
<li>
<p><strong>'network_skills':</strong></p>
<ul>
<li>Waits for the <code>'mycroft.network.connected'</code> message  </li>
</ul>
</li>
<li>
<p><strong>'internet_skills':</strong></p>
<ul>
<li>Waits for the <code>'mycroft.internet.connected'</code> message  </li>
</ul>
</li>
<li>
<p><strong>'setup':</strong></p>
<ul>
<li>Waits for an external setup skill to handle actions such as pairing and configuration. </li>
</ul>
</li>
<li>
<p><strong>'audio':</strong></p>
<ul>
<li>Waits for the audio stack to be initialized </li>
</ul>
</li>
<li>
<p><strong>'speech':</strong></p>
<ul>
<li>Waits for the speech engine (STT) to be initialized  </li>
</ul>
</li>
</ul>
<pre><code class="language-json">{
  &quot;ready_settings&quot;: [
    &quot;skills&quot;,
    &quot;network_skills&quot;,
    &quot;internet_skills&quot;,
    &quot;audio&quot;,
    &quot;speech&quot;
  ]
}
</code></pre>
<blockquote>
<p><strong>WARNING</strong> The default behavior is to wait only for offline skills at the start. This is a departure from mycroft-core, which did not have dynamic skills. It may impact skills listening for the <code>mycroft.ready</code> event. </p>
</blockquote>
<p>In this example, the <code>ready_settings</code> are configured to wait for network and internet connectivity before emitting
the <code>'mycroft.ready'</code> message. Each setup can costumize these settings based on their needs, a offline install won't
want internet skills, a server wont want a audio stack etc.</p>
<h2 id="dynamic-loading-and-unloading">Dynamic Loading and Unloading</h2>
<p><strong>NEW</strong> in <code>ovos-core</code> version <strong>0.0.8</strong></p>
<p><strong>Optimizing Resource Usage</strong></p>
<p>OVOS introduces dynamic loading and unloading of skills, streamlining resource management. Skill developers no longer need to perform connectivity checks during the skill loading process.</p>
<p>Skills are loaded only when their specific requirements are met. This optimization prevents unnecessary loading, conserving system resources and ensuring a more efficient skill environment.</p>
<p><strong>Reducing Unintended Activations</strong></p>
<p>Dynamic unloading of skills based on specific conditions significantly reduces the chance of unintentional activations. In scenarios where required conditions are not met, skills are gracefully unloaded, enhancing the user experience by avoiding unintended skill triggers.</p>
<p>This approach aligns with resource-conscious design, providing a more responsive and reliable voice assistant environment. Developers can focus on skill functionality, knowing that OVOS efficiently manages skill loading and unloading based on runtime requirements.</p>
<h2 id="the-runtimerequirements-classproperty">The RuntimeRequirements @classproperty</h2>
<p><strong>NEW</strong> in <code>ovos-core</code> version <strong>0.0.8</strong></p>
<blockquote>
<p><strong>WARNING</strong> this functionality deprecates <code>"priority_skills"</code> config option</p>
</blockquote>
<p>The <code>RuntimeRequirements</code> property is a class property that skill developers can utilize to define the conditions and
resource requirements of their skill during initialization and runtime. This property is a part of the <code>OVOSSkill</code> class
and is used to guide the loading and unloading of skills based on specified criteria.</p>
<p>To use <code>RuntimeRequirements</code>, skill developers need to override the property within their skill class.</p>
<p>It's important to note that <code>RuntimeRequirements</code> is optional. If not defined, OVOS will assume internet is required but GUI is optional. This default behavior reflects the original behavior of <code>mycroft-core</code> and <strong>might change in the future</strong>.</p>
<blockquote>
<p><strong>NOTE:</strong> The <code>@classproperty</code> decorator allows <code>SkillManager</code> to read this without instantiating the skill.</p>
</blockquote>
<p>These examples showcase how <code>RuntimeRequirements</code> can be used to tailor the loading and runtime conditions of a skill
based on specific requirements and dependencies.</p>
<h3 id="fully-offline-skill">Fully Offline Skill</h3>
<p>In this example, a fully offline skill is defined. The skill does not require internet or network connectivity during
loading or runtime. If the network or internet is unavailable, the skill can still operate.</p>
<p>Defining this will ensure your skill loads as soon as possible; otherwise, the <code>SkillManager</code> will wait for internet before loading the skill.</p>
<pre><code class="language-python">from ovos_utils import classproperty
from ovos_workshop.skills import OVOSSkill


class MyOfflineSkill(OVOSSkill):

    @classproperty
    def runtime_requirements(self):
        return RuntimeRequirements(internet_before_load=False,
                                   network_before_load=False,
                                   requires_internet=False,
                                   requires_network=False,
                                   no_internet_fallback=True,
                                   no_network_fallback=True)
</code></pre>
<h3 id="internet-dependent-skill">Internet-Dependent Skill</h3>
<p>In this example, an online search skill with a local cache is defined. The skill requires internet connectivity during
both loading and runtime. If the internet is not available, the skill won't load. Once loaded, the skill continues to
require internet connectivity.</p>
<p>However, our skill keeps a cache of previous results; therefore, it declares it can handle internet outages and will not
be unloaded when the internet goes down.</p>
<pre><code class="language-python">from ovos_utils import classproperty
from ovos_workshop.skills import OVOSSkill


class MyInternetSkill(OVOSSkill):

    @classproperty
    def runtime_requirements(self):
        # our skill can answer cached results when the internet goes down
        return RuntimeRequirements(
            internet_before_load=True,  # only load once we have internet
            requires_internet=True,  # indicate we need internet to work
            no_internet_fallback=True  # do NOT unload if internet goes down
        )

    def initialize(self):
        ...  # do something that requires internet connectivity
</code></pre>
<h3 id="iot-skill-controlling-devices-via-lan">IOT Skill Controlling Devices via LAN</h3>
<p>Consider a skill that should only load once we have a network connection.
By specifying that requirement, we can ensure that the skill is only loaded once the requirements are met, and it is
safe to utilize network resources on initialization.</p>
<p>In this example, an IOT skill controlling devices via LAN is defined. The skill requires network connectivity during
loading, and if the network is not available, it won't load.</p>
<p>Once loaded, the skill continues to require network connectivity and will unload if the network is lost.</p>
<pre><code class="language-python">from ovos_utils import classproperty
from ovos_workshop.skills import OVOSSkill


class MyIOTSkill(OVOSSkill):

    @classproperty
    def runtime_requirements(self):
        return RuntimeRequirements(
            network_before_load=True,  # only load once network available
            requires_network=True,  # we need network to work
            no_network_fallback=False  # unload if network goes down
        )

    def initialize(self):
        ...  # do something that needs LAN connectivity
</code></pre>
<h3 id="gui-and-internet-dependent-skill-with-fallback">GUI and Internet-Dependent Skill with Fallback</h3>
<p>Consider a skill with both graphical user interface (GUI) and internet dependencies is defined.</p>
<p>The skill requires both GUI availability and internet connectivity during loading.</p>
<p>If either the GUI or the internet is not available, the skill won't load. Once loaded, the skill continues to require
both GUI availability, but internet connectivity is optional.</p>
<p>If the user asks "show me the picture of the day" and we have both internet and a GUI, our skill will match the intent.</p>
<p>If we do not have internet but have a GUI, the skill will still operate, using a cached picture. If no GUI is available then the skill will unload regardless of internet status</p>
<pre><code class="language-python">from ovos_utils import classproperty
from ovos_workshop.skills import OVOSSkill


class MyGUIAndInternetSkill(OVOSSkill):

    @classproperty
    def runtime_requirements(self) -&gt; RuntimeRequirements:
        return RuntimeRequirements(
            gui_before_load=True,  # only load if GUI is available
            requires_gui=True,  # continue requiring GUI once loaded
            internet_before_load=True,  # only load if internet is available
            requires_internet=True,  # continue requiring internet once loaded
            no_gui_fallback=False,  # unload if GUI becomes unavailable
            no_internet_fallback=True  # do NOT unload if internet becomes unavailable, use cached picture
        )

    def initialize(self):
        ...  # do something that requires both GUI and internet connectivity
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../skill_api/" class="btn btn-neutral float-left" title="Skill API"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../skill_json/" class="btn btn-neutral float-right" title="Skill Json">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../skill_api/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../skill_json/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
